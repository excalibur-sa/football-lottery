# 竞彩足球数据分析小程序

将原有的Flask Web应用改造为微信小程序，使用微信云开发实现后端服务。

## 项目结构

```
bonus/
├── miniprogram/                    # 小程序前端代码
│   ├── app.js                      # 小程序入口
│   ├── app.json                    # 全局配置
│   ├── app.wxss                    # 全局样式
│   ├── cloudfunctions/             # 云函数目录（已合并到小程序目录）
│   │   ├── getMatches/             # 获取比赛列表
│   │   ├── getMatchOdds/           # 获取赔率详情
│   │   └── getOddsHistory/         # 获取赔率历史
│   ├── pages/
│   │   ├── index/                  # 首页-比赛列表
│   │   └── detail/                 # 详情页-赔率分析
│   └── utils/                      # 工具函数
│
├── project.config.json             # 项目配置文件
└── ... (原有Flask代码保留)
```

## 部署步骤

### 1. 准备工作

1. 确保已安装[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 有一个已注册的微信小程序账号（个人或企业）
3. 获取小程序的 AppID

### 2. 配置项目

1. 修改 `project.config.json` 文件中的 `appid`：
```json
{
  "appid": "你的小程序AppID"
}
```

### 3. 开通云开发

1.打开微信开发者工具
2.导入项目目录 `bonus/miniprogram/`（注意：只导入小程序代码目录）
3. 在工具中点击菜单"云开发" → "开通云开发"
4. 按提示完成云开发环境的创建（首次免费开通）

> **注意**：只需导入 `miniprogram`子目录，原Flask Web应用代码无需包含在小程序项目中。

### 4. 部署云函数

1. 在微信开发者工具左侧云开发面板中，选择"云函数"
2. 分别上传三个云函数：
   - `getMatches`
   - `getMatchOdds` 
   - `getOddsHistory`
3.右点击每个云函数文件夹 → "上传并部署：云端安装依赖"
4.等待上传完成，确保控制台显示"部署成功"

> **详细上传步骤**：
> 1.确保已在微信开发者工具中开通云开发环境
> 2. 在项目根目录找到`cloudfunctions/`文件夹
> 3.将该文件夹中的三个子文件夹拖拽到云开发面板的云函数区域
> 4. 对每个云函数右键选择"上传并部署：云端安装依赖"
> 5.等待进度条完成，查看控制台输出确认部署成功

> **验证方法**：
> - 在云开发控制台的"云函数"页面查看函数列表
> - 确认三个函数状态都显示为"已部署"
> - 在小程序中测试功能是否正常运行

### 5. 本地调试

1. 点击开发者工具中的"编译"按钮
2. 测试各项功能：
   - 首页比赛列表加载
   - 日期筛选功能
   - 查看赔率详情
   - 赔率差值分析
   - 数据分享功能

### 6. 提交审核

1. 在微信开发者工具中点击"上传"按钮
2. 填写版本号和项目备注
3. 登录[微信公众平台](https://mp.weixin.qq.com/)
4. 在"开发管理" → "开发版本"中提交审核
5. 审核通过后点击"发布"

## 功能说明

### 核心功能

1. **比赛列表展示**
   - 显示当日或指定日期的竞彩足球比赛
   - 支持按日期筛选
   - 展示基本赔率信息

2. **赔率详情查看**
   - 单场比赛完整赔率信息
   - 胜平负/让球胜平负赔率
   - 赔率变化历史记录

3. **赔率差值分析**
   - 计算胜/负赔率差值
   - 计算双平赔率差值
   - 显示差值正负标识

4. **数据分享**
   - 选择多场比赛
   - 生成文本格式数据
   - 复制到剪贴板分享

### 技术特点

- **前后端分离**：小程序前端 + 云函数后端
- **无服务器架构**：使用微信云开发，无需自行部署服务器
- **免费额度**：云开发提供免费配额，满足个人使用需求
- **实时数据**：直接调用竞彩网官方API获取最新数据

## 注意事项

1. **审核要求**：小程序仅提供数据展示功能，不得涉及投注引导
2. **数据来源**：数据来自竞彩网官方公开API
3. **使用限制**：仅供个人学习研究使用，请勿用于商业用途
4. **API调用**：注意竞彩网API的调用频率限制

## 常见问题

### 1. 云函数部署失败
- 检查网络连接
- 确认已开通云开发环境
- 查看云开发控制台的错误日志

### 2. 数据加载失败
- 检查云函数是否正确部署
- 查看开发者工具控制台的错误信息
- 确认竞彩网API是否可访问

### 3. 审核被拒
- 确保不提供投注功能
- 避免使用博彩相关敏感词汇
- 提供清晰的功能说明

## 技术支持

如有问题可通过以下方式联系：
- 提交 GitHub Issue
- 微信开发者社区提问